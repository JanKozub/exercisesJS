<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>zad1</title>

    <script src="../../jq.js"></script>
    <script>
        const lps = ["lp", "cena", "produkt"]
        const ceny = ["5,60", "3,23", "7,45", "10,00", "3,20"]
        const produkty = ["chleb", "mąka", "masło", "kefir", "dżem"]

        $(document).ready(function () {
            let table = $("<table>")
            let main = $("#main")

            $("#createTb").on("click", function () {
                genHeader();

                genContent();

                genSum();

                main.append(table)
            })

            function genHeader() {
                let header = $("<tr></tr>")
                for (let i = 0; i < 3; i++) {
                    let td = $(`<td>${lps[i]}</td>`)
                    header.append(td)
                }
                table.append(header)
            }

            function genContent() {
                for (let i = 0; i < ceny.length; i++) {
                    let tr = $("<tr></tr>")
                    for (let k = 0; k < 3; k++) {
                        let td;
                        switch (k) {
                            case 0:
                                td = $(`<td>${(i + 1)}</td>`)
                                break;
                            case 1:
                                td = $(`<td>${ceny[i]}</td>`)
                                break;
                            case 2:
                                td = $(`<td>${produkty[i]}</td>`)
                                break;
                        }
                        tr.append(td)
                    }
                    table.append(tr)
                }
            }

            function genSum() {
                let tr = $("<tr></tr>")
                tr.append("<td>suma</td>")

                var sum = 0.0;
                sum = parseFloat(sum)
                for (let i = 0; i < ceny.length; i++) {
                    sum = sum + parseFloat(ceny[i].replaceAll(",", "."))
                }

                tr.append(`<td colspan="2">${sum.toString().replaceAll(".", ",")}</td>`)

                table.append(tr)
            }
        })
    </script>

    <style>
        td {
            border: black 2px solid;
        }
    </style>
</head>
<body>
<button id="createTb">Utworz tabele</button>

<div id="main"></div>
</body>
</html>
